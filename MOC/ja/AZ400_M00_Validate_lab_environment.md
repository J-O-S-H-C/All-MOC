---
lab:
  title: ラボ環境を検証する
  module: 'Module 0: Welcome'
---

### Azure リソースにアクセスするためのサービス接続を作成する

Azure DevOps にサービス接続を作成する必要があります。これにより、Azure サブスクリプションにリソースをデプロイしてアクセスできるようになります。

1. Web ブラウザーを開始し、Azure DevOps portal `https://aex.dev.azure.com` に移動します。

1. Azure DevOps 組織にサインインします。

    > **注**: Azure DevOps 組織に初めてサインインする場合は、プロファイルの作成とサービス使用条件への同意を求めるメッセージが表示されるので、**[続行]** を選択します。

1. **eShopOnWeb** プロジェクトを開き、ポータルの左下隅にある **[プロジェクトの設定]** を選択します。

1. [パイプライン] で **[サービス接続]** を選択し、**[サービス接続の作成]** ボタンを選択します。

    ![新しいサービス接続の作成ボタンのスクリーンショット。](images/new-service-connection.png)

1. **[新しいサービス接続]** ブレードで、**[Azure Resource Manager]** と **[次へ]** を選択します (必要に応じて下にスクロールします)。

1. **[ID の種類]** Dropbox から **[アプリの登録 (自動)]** を選択します。

1. **[スコープのレベル]** の下にある **[ワークロード ID フェデレーション]** と **[サブスクリプション]** を選択します。

    > **注**: サービス接続を手動で構成する場合は、**[アプリの登録またはマネージド ID (手動)]** を使用することもできます。 [Azure DevOps ドキュメント](https://learn.microsoft.com/azure/devops/pipelines/library/connect-to-azure)の手順に従って、サービス接続を手動で作成します。

1. 次の情報を使用して空のフィールドに入力します。

    - **サブスクリプション**:Azure サブスクリプションを選択します。
    - **リソース グループ**: リソースをデプロイするリソース グループを選択します。 リソース グループがない場合は、[　Azure portal を使用した Azure リソース グループの管理](https://learn.microsoft.com/azure/azure-resource-manager/management/manage-resource-groups-portal)の手順に従って、Azure portal で作成できます。
    - **[サービス接続名]** に **`azure subs`** と入力します。 この名前は、Azure サブスクリプションにアクセスするときに YAML パイプラインで参照されます。

1. **[すべてのパイプラインにアクセス許可を付与する]** オプションがオフになっていることを確認し、**[保存]** を選択します。

    > **注**: 運用環境では、**[すべてのパイプラインへのアクセス許可を与える]** オプションは推奨されません。 このラボでは、パイプラインの構成を簡略化するためにのみ使用されます。

    > **注**: サービス接続を作成するために必要なアクセス許可がないことを示すエラー メッセージが表示された場合は、もう一度やり直すか、サービス接続を手動で構成してください。

これで、ラボを続けるために必要な前提条件の手順が完了しました。
